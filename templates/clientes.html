<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CamiCandy - Clientes</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/Clientes.css') }}"
    />
  </head>

  <body id="body">
    <header>
      <div class="icon__menu">
        <img
          src="{{ url_for('static', filename='imagenes/icons/menu.png') }}"
          alt=""
          id="btn_open"
        />
      </div>
      <div class="icon__configuracion">
        <img
          src="{{ url_for('static', filename='imagenes/icons/config.png') }}"
          alt=""
        />
      </div>
      <div class="boton">
        <button class="switch" id="switch">
          <span
            ><img
              src="{{ url_for('static', filename='imagenes/icons/sol.png') }}"
              alt=""
          /></span>
          <span
            ><img
              src="{{ url_for('static', filename='imagenes/icons/luna.png') }}"
              alt=""
          /></span>
        </button>
      </div>
    </header>

    <div class="menu__side" id="menu_side">
      <div class="name_page">
        <img
          src="{{ url_for('static', filename='imagenes/logo.png') }}"
          alt=""
        />
        <h4>CamiCandy</h4>
      </div>

      <div class="options__menu">
        <a href="{{ url_for('dashboard') }}">
          <div class="option">
            <img
              src="{{ url_for('static', filename='imagenes/icons/dashboard.png') }}"
              title="Dashboard"
            />
            <h4>Dashboard</h4>
          </div>
        </a>
        <a href="{{ url_for('productos') }}">
          <div class="option">
            <img
              src="{{ url_for('static', filename='imagenes/icons/productos.png') }}"
              title="Productos"
            />
            <h4>Productos</h4>
          </div>
        </a>
        <a href="{{ url_for('clientes') }}" class="selector">
          <div class="option">
            <img
              src="{{ url_for('static', filename='imagenes/icons/clientes.png') }}"
              title="Clientes"
            />
            <h4>Clientes</h4>
          </div>
        </a>
        <a href="{{ url_for('proveedores') }}">
          <div class="option">
            <img
              src="{{ url_for('static', filename='imagenes/icons/proveedores.png') }}"
              title="Proveedores"
            />
            <h4>Proveedores</h4>
          </div>
        </a>
        <a href="#">
          <div class="option">
            <img
              src="{{ url_for('static', filename='imagenes/icons/icons8-transacción-30.png') }}"
              title="Transacciones"
            />
            <h4>Transacciones</h4>
          </div>
        </a>
        <a href="#">
          <div class="option">
            <img
              src="{{ url_for('static', filename='imagenes/icons/reportes.png') }}"
              title="Reportes"
            />
            <h4>Reportes</h4>
          </div>
        </a>
        <a href="#">
          <div class="option">
            <img
              src="{{ url_for('static', filename='imagenes/icons/herramientas.png') }}"
              title="Herramientas"
            />
            <h4>Herramientas</h4>
          </div>
        </a>
        <a href="#">
          <div class="option">
            <img
              src="{{ url_for('static', filename='imagenes/icons/ayuda.png') }}"
              title="Ayuda"
            />
            <h4>Ayuda</h4>
          </div>
        </a>
      </div>
    </div>

    <main>
      <div class="container_clientes">
        <h1>Clientes</h1>
        <div class="container_clientes_buscar">
          <input type="text" placeholder="Buscar" />
          <button onclick="mostrarFormulario()">Añadir clientes</button>
          <button class="Realizar_venta">Realizar venta</button>
          <button class="Actualizar">Actualizar</button>
          <button class="Eliminar">Eliminar</button>
        </div>
        <div class="clientes">
          <table class="table_de_clientes">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Dirección</th>
                <th>Teléfono</th>
                <th>Cédula</th>
              </tr>
            </thead>
            <tbody>
              <!-- Aquí se mostrarán los datos de los clientes -->
              {% for cliente in clientes %}
              <tr>
                <td>{{ cliente.id }}</td>
                <td>{{ cliente.nombre }}</td>
                <td>{{ cliente.direccion }}</td>
                <td>{{ cliente.telefono }}</td>
                <td>{{ cliente.cedula }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </main>

    <!-- Ventana emergente para agregar un nuevo cliente -->
    <div id="modal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="cerrarFormulario()">&times;</span>
        <h2>Agregar Nuevo Cliente</h2>
        <form id="formulario" action="{{ url_for('clientes') }}" method="POST">
          <label for="nombre">Nombre:</label>
          <input type="text" id="nombre" name="nombre" required /><br />
          <label for="direccion">Dirección:</label>
          <input type="text" id="direccion" name="direccion" required /><br />
          <label for="telefono">Teléfono:</label>
          <input
            type="text"
            id="telefono"
            name="telefono"
            required
            onkeydown="return validarNumero(event)"
          /><br />
          <label for="cedula">Cédula:</label>
          <input
            type="text"
            id="cedula"
            name="cedula"
            required
            onkeydown="return validarNumero(event)"
          /><br />
          <input type="submit" value="Agregar" />
        </form>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/component.js') }}"></script>
    <script>
      function validarNumero(event) {
        // Permitir: backspace, delete, tab, escape, enter y .
        if (
          ["Backspace", "Delete", "Tab", "Escape", "Enter", "."].indexOf(
            event.key,
          ) !== -1 ||
          ((event.ctrlKey || event.metaKey) &&
            ["a", "c", "v", "x"].indexOf(event.key) !== -1) ||
          ["ArrowLeft", "ArrowRight", "ArrowUp", "ArrowDown"].indexOf(
            event.key,
          ) !== -1
        ) {
          return true;
        }
        // Asegurarse de que es un número
        if (!/^[0-9]$/.test(event.key)) {
          event.preventDefault();
          return false;
        }
        return true;
      }

      function mostrarFormulario() {
        document.getElementById("modal").style.display = "block";
      }

      function cerrarFormulario() {
        document.getElementById("modal").style.display = "none";
        limpiarCampos();
      }

      function limpiarCampos() {
        document.getElementById("formulario").reset();
      }
    </script>
  </body>
</html>
